### **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –¥–ª—è —Å–∫—Ä–∏–ø—Ç–∞ `update_sites.sh`**

---

## **–û–ø–∏—Å–∞–Ω–∏–µ**

–≠—Ç–æ—Ç —Å–∫—Ä–∏–ø—Ç –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å–ø–∏—Å–∫–∞ –¥–æ–º–µ–Ω–æ–≤ –≤ AdGuardHome. –°–∫—Ä–∏–ø—Ç –∑–∞–≥—Ä—É–∂–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –¥–æ–º–µ–Ω–æ–≤ –∏–∑ —É–¥–∞–ª–µ–Ω–Ω–æ–≥–æ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è GitHub –∏ –æ–±—ä–µ–¥–∏–Ω—è–µ—Ç –µ–≥–æ —Å –ª–æ–∫–∞–ª—å–Ω—ã–º —Å–ø–∏—Å–∫–æ–º, —É–¥–∞–ª—è—è –¥—É–±–ª–∏—Ä—É—é—â–∏–µ—Å—è –∑–∞–ø–∏—Å–∏ –∏ –ø–æ–¥–¥–æ–º–µ–Ω—ã. –†–µ–∑—É–ª—å—Ç–∞—Ç —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ —Ñ–æ—Ä–º–∞—Ç–µ, –ø—Ä–∏–≥–æ–¥–Ω–æ–º –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ AdGuardHome.

---

## **–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏**

1. **–§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –∏—Ç–æ–≥–æ–≤–æ–≥–æ —Ñ–∞–π–ª–∞**:  
   –ò—Ç–æ–≥–æ–≤—ã–π —Ñ–∞–π–ª —Å–æ–¥–µ—Ä–∂–∏—Ç —Ç–æ–ª—å–∫–æ —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ –¥–æ–º–µ–Ω—ã –ø–µ—Ä–≤–æ–≥–æ —É—Ä–æ–≤–Ω—è —Å –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ–º `/bypass,bypass6`.

2. **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ**:
   - **`duplicates.log`**: —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –¥—É–±–ª–∏—Ä—É—é—â–∏–µ—Å—è –∑–∞–ø–∏—Å–∏.
   - **`subdomains.log`**: —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –ø–æ–¥–¥–æ–º–µ–Ω—ã.
   - **`script.log`**: –∂—É—Ä–Ω–∞–ª –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Å–∫—Ä–∏–ø—Ç–∞.

3. **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ —Ñ–∞–π–ª–∞**:  
   –õ–æ–∫–∞–ª—å–Ω—ã–π —Ñ–∞–π–ª `my-domains-list.conf` –æ–±—ä–µ–¥–∏–Ω—è–µ—Ç—Å—è —Å —É–¥–∞–ª–µ–Ω–Ω—ã–º —Å–ø–∏—Å–∫–æ–º.

4. **–ú–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ—Å—Ç—å**:  
   –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —É—Å–∫–æ—Ä–µ–Ω–∏—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –±–æ–ª—å—à–æ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –¥–æ–º–µ–Ω–æ–≤.

5. **–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤ Telegram**:  
   –°–∫—Ä–∏–ø—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∏—Ç–æ–≥–æ–≤—ã–π –æ—Ç—á–µ—Ç –≤ Telegram –æ–¥–Ω–∏–º —Å–æ–æ–±—â–µ–Ω–∏–µ–º, —Å–æ–¥–µ—Ä–∂–∞—â–∏–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Ö–æ–¥–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞—Ö.

---

## **–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è**

- –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–π **AdGuardHome**.
- –î–æ—Å—Ç—É–ø –∫ –∫–æ–º–∞–Ω–¥–∞–º `curl`, `awk` –∏ `xargs`.
- –î–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ `/opt/etc/AdGuardHome/` –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è —Ñ–∞–π–ª–æ–≤.
- –¢–æ–∫–µ–Ω –±–æ—Ç–∞ Telegram –∏ chat_id –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π.

---

## **–£—Å—Ç–∞–Ω–æ–≤–∫–∞**

1. **–°–∫–∞—á–∏–≤–∞–Ω–∏–µ —Å–∫—Ä–∏–ø—Ç–∞**:  
   ```bash
   curl -o /opt/etc/AdGuardHome/update_sites.sh https://raw.githubusercontent.com/mdxl/keenetic/main/update_sites.sh
   ```

2. **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞**:  
   –°–¥–µ–ª–∞–π—Ç–µ —Å–∫—Ä–∏–ø—Ç –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–º:
   ```bash
   chmod +x /opt/etc/AdGuardHome/update_sites.sh
   ```

3. **–°–æ–∑–¥–∞–Ω–∏–µ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ —Ñ–∞–π–ª–∞ (–µ—Å–ª–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç)**:  
   ```bash
   touch /opt/etc/AdGuardHome/my-domains-list.conf
   ```

4. **–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π**:  
   –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –≤—ã–≥–ª—è–¥–∏—Ç —Å–ª–µ–¥—É—é—â–∏–º –æ–±—Ä–∞–∑–æ–º:
   ```
   /opt/etc/AdGuardHome/
       update_sites.sh
       my-domains-list.conf
       ipset.conf
       duplicates.log
       subdomains.log
       script.log
   ```

5. **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ Telegram**:
   - –ó–∞–º–µ–Ω–∏—Ç–µ `YOUR_BOT_TOKEN` –∏ `YOUR_CHAT_ID` –≤ —Å–∫—Ä–∏–ø—Ç–µ –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è.
   - –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –±–æ—Ç –∏–º–µ–µ—Ç –¥–æ—Å—Ç—É–ø –∫ –æ—Ç–ø—Ä–∞–≤–∫–µ —Å–æ–æ–±—â–µ–Ω–∏–π –≤ —É–∫–∞–∑–∞–Ω–Ω—ã–π —á–∞—Ç.

---

## **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ**

1. **–†—É—á–Ω–æ–π –∑–∞–ø—É—Å–∫**:  
   –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç:
   ```bash
   /opt/etc/AdGuardHome/update_sites.sh
   ```

2. **–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è**:
   - **`ipset.conf`**: –æ—Å–Ω–æ–≤–Ω–æ–π —Ñ–∞–π–ª —Å –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–º —Å–ø–∏—Å–∫–æ–º –¥–æ–º–µ–Ω–æ–≤.
   - **`duplicates.log`**: –¥—É–±–ª–∏—Ä—É—é—â–∏–µ—Å—è –∑–∞–ø–∏—Å–∏.
   - **`subdomains.log`**: –ø–æ–¥–¥–æ–º–µ–Ω—ã.
   - **`script.log`**: –ª–æ–≥ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Å–∫—Ä–∏–ø—Ç–∞.
   - **–£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –≤ Telegram**: –∏—Ç–æ–≥–æ–≤—ã–π –æ—Ç—á–µ—Ç –æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏.

---

## **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è**

–î–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å–ø–∏—Å–∫–∞ –¥–æ–º–µ–Ω–æ–≤ –∫–∞–∂–¥—ã–π –¥–µ–Ω—å –≤ 6 —É—Ç—Ä–∞ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ —Å–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:

### **1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ `cron`**
–ï—Å–ª–∏ `cron` –µ—â—ë –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω, –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:
```bash
opkg update
opkg install cron
```

–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–ª—É–∂–±—É `cron`:
```bash
/opt/etc/init.d/S10cron start
```

### **2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∑–∞–¥–∞—á–∏ –≤ `cron`**
–û—Ç–∫—Ä–æ–π—Ç–µ —Ñ–∞–π–ª `crontab`:
```bash
nano /opt/etc/crontab
```

–î–æ–±–∞–≤—å—Ç–µ —Å—Ç—Ä–æ–∫—É:
```bash
0 6 * * * root /opt/etc/AdGuardHome/update_sites.sh
```

- **`0 6 * * *`**: –∑–∞–¥–∞—á–∞ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –µ–∂–µ–¥–Ω–µ–≤–Ω–æ –≤ 6:00 —É—Ç—Ä–∞.
- **`root`**: –∑–∞–¥–∞—á–∞ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –æ—Ç –∏–º–µ–Ω–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è `root`.
- **`/opt/etc/AdGuardHome/update_sites.sh`**: –ø—É—Ç—å –∫ —Å–∫—Ä–∏–ø—Ç—É.

–°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è (`Ctrl+O`, –∑–∞—Ç–µ–º `Enter` –∏ `Ctrl+X`).

–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ `cron`:
```bash
/opt/etc/init.d/S10cron restart
```

---

## **–§–æ—Ä–º–∞—Ç —Ñ–∞–π–ª–æ–≤**

### **1. –õ–æ–∫–∞–ª—å–Ω—ã–π —Ñ–∞–π–ª: `my-domains-list.conf`**
–§–∞–π–ª –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å –¥–æ–º–µ–Ω—ã, –∫–æ—Ç–æ—Ä—ã–µ –Ω—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –≤ –∏—Ç–æ–≥–æ–≤—ã–π —Å–ø–∏—Å–æ–∫, –ø–æ –æ–¥–Ω–æ–º—É –Ω–∞ —Å—Ç—Ä–æ–∫—É:
```
example.com
test.com
sub.example.com
```

### **2. –ò—Ç–æ–≥–æ–≤—ã–π —Ñ–∞–π–ª: `ipset.conf`**
–§–æ—Ä–º–∞—Ç –∏—Ç–æ–≥–æ–≤–æ–≥–æ —Ñ–∞–π–ª–∞:
```
example.com/bypass,bypass6
test.com/bypass,bypass6
```

---

## **–†–µ–∑—É–ª—å—Ç–∞—Ç—ã**

### **–õ–æ–≥ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è: `script.log`**
–ü—Ä–∏–º–µ—Ä:
```
2025-01-18 14:00:00 - –ó–∞–≥—Ä—É–∑–∫–∞ —Å–ø–∏—Å–∫–∞ —Å–∞–π—Ç–æ–≤ –∏–∑ https://raw.githubusercontent.com/itdoginfo/allow-domains/main/Russia/inside-raw.lst
2025-01-18 14:00:01 - –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ñ–∞–π–ª–∞: /opt/etc/AdGuardHome/my-domains-list.conf
2025-01-18 14:00:02 - –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ñ–∞–π–ª–∞: /tmp/tempfile.12345
2025-01-18 14:00:03 - –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –∏—Ç–æ–≥–æ–≤–æ–≥–æ —Ñ–∞–π–ª–∞: /opt/etc/AdGuardHome/ipset.conf
2025-01-18 14:00:03 - –°–∫—Ä–∏–ø—Ç –∑–∞–≤–µ—Ä—à—ë–Ω. –§–∞–π–ª /opt/etc/AdGuardHome/ipset.conf —É—Å–ø–µ—à–Ω–æ –æ–±–Ω–æ–≤–ª—ë–Ω.
```

### **–õ–æ–≥ –¥—É–±–ª–µ–π: `duplicates.log`**
–°–æ–¥–µ—Ä–∂–∏—Ç –¥—É–±–ª–∏—Ä—É—é—â–∏–µ—Å—è –∑–∞–ø–∏—Å–∏:
```
duplicate1.com
duplicate2.com
```

### **–õ–æ–≥ –ø–æ–¥–¥–æ–º–µ–Ω–æ–≤: `subdomains.log`**
–°–æ–¥–µ—Ä–∂–∏—Ç –ø–æ–¥–¥–æ–º–µ–Ω—ã, –∫–æ—Ç–æ—Ä—ã–µ –±—ã–ª–∏ –∏—Å–∫–ª—é—á–µ–Ω—ã –∏–∑ –∏—Ç–æ–≥–æ–≤–æ–≥–æ —Ñ–∞–π–ª–∞:
```
sub.example.com
test.sub.example.com
```

### **–£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –≤ Telegram**
–ü—Ä–∏–º–µ—Ä –∏—Ç–æ–≥–æ–≤–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è:
```
üîÑ *–°–∫—Ä–∏–ø—Ç –∑–∞–ø—É—â–µ–Ω.*
–ó–∞–≥—Ä—É–∑–∫–∞ —Å–ø–∏—Å–∫–∞ –¥–æ–º–µ–Ω–æ–≤ —Å GitHub...
‚úÖ –°–ø–∏—Å–æ–∫ –¥–æ–º–µ–Ω–æ–≤ —É—Å–ø–µ—à–Ω–æ –∑–∞–≥—Ä—É–∂–µ–Ω.
üìä *–ò—Ç–æ–≥–æ–≤—ã–π –æ—Ç—á–µ—Ç:*
- –£–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –¥–æ–º–µ–Ω–æ–≤: 150
- –î—É–±–ª–∏–∫–∞—Ç–æ–≤: 10
- –ü–æ–¥–¥–æ–º–µ–Ω–æ–≤: 25
‚úÖ *–°–∫—Ä–∏–ø—Ç —É—Å–ø–µ—à–Ω–æ –∑–∞–≤–µ—Ä—à—ë–Ω.* –§–∞–π–ª /opt/etc/AdGuardHome/ipset.conf –æ–±–Ω–æ–≤–ª—ë–Ω.
```

---

## **–û—Ç–ª–∞–¥–∫–∞**

1. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞**:
   ```bash
   chmod 755 /opt/etc/AdGuardHome/
   chmod 644 /opt/etc/AdGuardHome/*
   ```

2. **–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã `cron`**:
   ```bash
   ps | grep cron
   ```

3. **–ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è**:
   ```bash
   tail -n 20 /opt/etc/AdGuardHome/script.log
   ```

4. **–ü—Ä–æ–≤–µ—Ä–∫–∞ Telegram-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π**:
   –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –±–æ—Ç –∏–º–µ–µ—Ç –¥–æ—Å—Ç—É–ø –∫ —á–∞—Ç—É –∏ —Ç–æ–∫–µ–Ω/chat_id —É–∫–∞–∑–∞–Ω—ã –≤–µ—Ä–Ω–æ.

---

## **–õ–∏—Ü–µ–Ω–∑–∏—è**
---

## **–ö–æ–Ω—Ç–∞–∫—Ç—ã**
---

### **–ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏**
- –î–æ–±–∞–≤–ª–µ–Ω —Ä–∞–∑–¥–µ–ª **–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤ Telegram**.
- –û–±–Ω–æ–≤–ª–µ–Ω–æ –æ–ø–∏—Å–∞–Ω–∏–µ –∏—Ç–æ–≥–æ–≤–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è –≤ Telegram.
- –£—Ç–æ—á–Ω–µ–Ω—ã —à–∞–≥–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ Telegram.
- –î–æ–±–∞–≤–ª–µ–Ω –ø—Ä–∏–º–µ—Ä –∏—Ç–æ–≥–æ–≤–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è –≤ Telegram.
- –£–ª—É—á—à–µ–Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –¥–ª—è —É–¥–æ–±—Å—Ç–≤–∞ —á—Ç–µ–Ω–∏—è.
